<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>nilmtk.metrics module &#8212; NILMTK 0.2 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="nilmtk.node" href="nilmtk.node.html" />
    <link rel="prev" title="nilmtk.metergroup" href="nilmtk.metergroup.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          NILMTK</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/nilmtk/nilmtk">github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="nilmtk.html">nilmtk package</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">nilmtk.metrics module</a><ul>
<li><a class="reference internal" href="#notation">Notation</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="nilmtk.metergroup.html" title="Previous Chapter: nilmtk.metergroup"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; nilmtk.metergroup</span>
    </a>
  </li>
  <li>
    <a href="nilmtk.node.html" title="Next Chapter: nilmtk.node"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">nilmtk.node &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/nilmtk.metrics.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="module-nilmtk.metrics">
<span id="nilmtk-metrics-module"></span><h1>nilmtk.metrics module<a class="headerlink" href="#module-nilmtk.metrics" title="Permalink to this headline">¶</a></h1>
<p>Metrics to compare disaggregation performance against ground truth
data.</p>
<p>All metrics functions have the same interface.  Each function takes
<cite>predictions</cite> and <cite>ground_truth</cite> parameters.  Both of which are
nilmtk.MeterGroup objects.  Each function returns one of two types:
either a pd.Series or a single float.  Most functions return a
pd.Series where each index element is a meter instance int or a tuple
of ints for MeterGroups.</p>
<div class="section" id="notation">
<h2>Notation<a class="headerlink" href="#notation" title="Permalink to this headline">¶</a></h2>
<p>Below is the notation used to mathematically define each metric.</p>
<p><span class="math">\(T\)</span> - number of time slices.</p>
<p><span class="math">\(t\)</span> - a time slice.</p>
<p><span class="math">\(N\)</span> - number of appliances.</p>
<p><span class="math">\(n\)</span> - an appliance.</p>
<p><span class="math">\(y^{(n)}_t\)</span> -  ground truth power of appliance <span class="math">\(n\)</span> in time slice <span class="math">\(t\)</span>.</p>
<p><span class="math">\(\hat{y}^{(n)}_t\)</span> -  estimated power of appliance <span class="math">\(n\)</span> in time slice <span class="math">\(t\)</span>.</p>
<p><span class="math">\(x^{(n)}_t\)</span> - ground truth state of appliance <span class="math">\(n\)</span> in time slice <span class="math">\(t\)</span>.</p>
<p><span class="math">\(\hat{x}^{(n)}_t\)</span> - estimated state of appliance <span class="math">\(n\)</span> in time slice <span class="math">\(t\)</span>.</p>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="nilmtk.metrics.error_in_assigned_energy">
<code class="descclassname">nilmtk.metrics.</code><code class="descname">error_in_assigned_energy</code><span class="sig-paren">(</span><em>predictions</em>, <em>ground_truth</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nilmtk/metrics.html#error_in_assigned_energy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nilmtk.metrics.error_in_assigned_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute error in assigned energy.</p>
<div class="math">
\[error^{(n)} = 
\left | \sum_t y^{(n)}_t - \sum_t \hat{y}^{(n)}_t \right |\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predictions, ground_truth</strong> : nilmtk.MeterGroup</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>errors</strong> : pd.Series</p>
<blockquote class="last">
<div><p>Each index is an meter instance int (or tuple for MeterGroups).
Each value is the absolute error in assigned energy for that appliance,
in kWh.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nilmtk.metrics.f1_score">
<code class="descclassname">nilmtk.metrics.</code><code class="descname">f1_score</code><span class="sig-paren">(</span><em>predictions</em>, <em>ground_truth</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nilmtk/metrics.html#f1_score"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nilmtk.metrics.f1_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute F1 scores.</p>
<div class="math">
\[F_{score}^{(n)} = \frac
    {2 * Precision * Recall}
    {Precision + Recall}\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predictions, ground_truth</strong> : nilmtk.MeterGroup</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>f1_scores</strong> : pd.Series</p>
<blockquote class="last">
<div><p>Each index is an meter instance int (or tuple for MeterGroups).
Each value is the F1 score for that appliance.  If there are multiple
chunks then the value is the weighted mean of the F1 score for
each chunk.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nilmtk.metrics.fraction_energy_assigned_correctly">
<code class="descclassname">nilmtk.metrics.</code><code class="descname">fraction_energy_assigned_correctly</code><span class="sig-paren">(</span><em>predictions</em>, <em>ground_truth</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nilmtk/metrics.html#fraction_energy_assigned_correctly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nilmtk.metrics.fraction_energy_assigned_correctly" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute fraction of energy assigned correctly</p>
<div class="math">
\[fraction = 
\sum_n min \left ( 
\frac{\sum_n y}{\sum_{n,t} y}, 
\frac{\sum_n \hat{y}}{\sum_{n,t} \hat{y}} 
\right )\]</div>
<p>Ignores distinction between different AC types, instead if there are 
multiple AC types for each meter then we just take the max value across
the AC types.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predictions, ground_truth</strong> : nilmtk.MeterGroup</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>fraction</strong> : float in the range [0,1]</p>
<blockquote class="last">
<div><p>Fraction of Energy Correctly Assigned.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nilmtk.metrics.mean_normalized_error_power">
<code class="descclassname">nilmtk.metrics.</code><code class="descname">mean_normalized_error_power</code><span class="sig-paren">(</span><em>predictions</em>, <em>ground_truth</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nilmtk/metrics.html#mean_normalized_error_power"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nilmtk.metrics.mean_normalized_error_power" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute mean normalized error in assigned power</p>
<div class="math">
\[error^{(n)} = 
\frac
{ \sum_t {\left | y_t^{(n)} - \hat{y}_t^{(n)} \right |} }
{ \sum_t y_t^{(n)} }\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predictions, ground_truth</strong> : nilmtk.MeterGroup</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>mne</strong> : pd.Series</p>
<blockquote class="last">
<div><p>Each index is an meter instance int (or tuple for MeterGroups).
Each value is the MNE for that appliance.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nilmtk.metrics.rms_error_power">
<code class="descclassname">nilmtk.metrics.</code><code class="descname">rms_error_power</code><span class="sig-paren">(</span><em>predictions</em>, <em>ground_truth</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nilmtk/metrics.html#rms_error_power"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nilmtk.metrics.rms_error_power" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute RMS error in assigned power</p>
<div class="math">
\[error^{(n)} = \sqrt{ \frac{1}{T} \sum_t{ \left ( y_t - \hat{y}_t \right )^2 } }\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predictions, ground_truth</strong> : nilmtk.MeterGroup</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>error</strong> : pd.Series</p>
<blockquote class="last">
<div><p>Each index is an meter instance int (or tuple for MeterGroups).
Each value is the RMS error in predicted power for that appliance.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, NILMTK Authors.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>